<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ìµëª… ì„¸ê¸ˆ ê²Œì‹œíŒ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;600;700&family=Noto+Sans+KR:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: radial-gradient(140% 160% at 15% 10%, rgba(16, 185, 129, 0.18), transparent),
            radial-gradient(120% 120% at 80% 0%, rgba(59, 130, 246, 0.22), transparent),
            #0a0f1c;
      --panel: #0f172a;
      --border: #1f2b45;
      --muted: #cbd5e1;
      --text: #e2e8f0;
      --accent: #22c55e;
      --shadow: 0 16px 46px rgba(0, 0, 0, 0.35);
      --radius: 16px;
      --font-heading: 'Space Grotesk', 'Noto Sans KR', system-ui, -apple-system, sans-serif;
      --font-body: 'Noto Sans KR', 'Space Grotesk', system-ui, -apple-system, sans-serif;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      background: var(--bg);
      color: var(--text);
      font-family: var(--font-body);
    }
    .shell { max-width: 1100px; margin: 0 auto; padding: 24px 18px 80px; }
    .hero {
      background: linear-gradient(135deg, rgba(17, 24, 39, 0.9), rgba(12, 20, 35, 0.9));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 18px 20px;
      box-shadow: var(--shadow);
      margin-bottom: 16px;
    }
    .hero h1 { margin: 6px 0; font-family: var(--font-heading); }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 5px 10px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.06);
      color: var(--muted);
      font-size: 12px;
    }
    .muted { color: var(--muted); }
    .mini { color: var(--muted); font-size: 13px; margin: 4px 0 0; }
    .card {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0.02));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 14px;
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 12px; }
    label { display: flex; flex-direction: column; gap: 6px; color: var(--muted); font-size: 14px; }
    input, select, textarea, button { font: inherit; }
    input, select, textarea {
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.03);
      color: var(--text);
    }
    textarea { min-height: 110px; resize: vertical; }
    .actions { display: flex; gap: 10px; flex-wrap: wrap; }
    button {
      border: 1px solid transparent;
      border-radius: 12px;
      padding: 11px 14px;
      font-weight: 700;
      cursor: pointer;
      color: #0a0f1c;
      background: linear-gradient(135deg, var(--accent), #16a34a);
      box-shadow: 0 12px 24px rgba(34, 197, 94, 0.32);
    }
    button.ghost {
      background: transparent;
      color: var(--text);
      border: 1px solid var(--border);
      box-shadow: none;
    }
    .filters { display: flex; gap: 8px; flex-wrap: wrap; margin: 14px 0; }
    .filters input, .filters select { flex: 1; min-width: 180px; }
    .post {
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 12px;
      background: rgba(255, 255, 255, 0.03);
      box-shadow: var(--shadow);
    }
    .post-head { display: flex; justify-content: space-between; gap: 8px; align-items: center; flex-wrap: wrap; }
    .badge { display: inline-flex; align-items: center; gap: 6px; padding: 4px 8px; border-radius: 10px; border: 1px solid var(--border); color: var(--text); font-size: 12px; }
    .category { background: rgba(34, 197, 94, 0.12); border-color: rgba(34, 197, 94, 0.3); }
    .mood { background: rgba(59, 130, 246, 0.12); border-color: rgba(59, 130, 246, 0.3); }
    .post-body { margin: 8px 0; line-height: 1.6; white-space: pre-wrap; }
    .post-meta { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; color: var(--muted); font-size: 13px; }
    .post-actions { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px; }
    .hint { border: 1px dashed var(--border); padding: 10px 12px; border-radius: 12px; background: rgba(255, 255, 255, 0.02); }
    @media (max-width: 720px) { .filters { flex-direction: column; } }
  </style>
</head>
<body>
  <main class="shell">
    <header class="hero">
      <p class="pill">ìµëª… ê²Œì‹œíŒ</p>
      <h1>ì„¸ê¸ˆ ê³ ë¯¼ì„ ë‚˜ëˆ„ì„¸ìš”</h1>
      <p class="muted">ë¡œê·¸ì¸ ì—†ì´ ë¡œì»¬ì— ì €ì¥ë©ë‹ˆë‹¤. ì—°ë§ì •ì‚°/ë²•ì¸ì„¸/ê¸ˆìœµì†Œë“ ê²°ê³¼ë¥¼ ë³µì‚¬í•´ ë¶™ì—¬ ë„£ê³  ì§ˆë¬¸í•˜ê±°ë‚˜ íŒì„ ê³µìœ í•˜ì„¸ìš”.</p>
    </header>

    <section class="card">
      <div class="grid">
        <label>ë¶„ë¥˜
          <select id="category">
            <option value="ì—°ë§ì •ì‚°">ì—°ë§ì •ì‚°</option>
            <option value="ë²•ì¸ì„¸">ë²•ì¸ì„¸</option>
            <option value="ê¸ˆìœµ/ì¢…í•©ì†Œë“">ê¸ˆìœµ/ì¢…í•©ì†Œë“</option>
            <option value="ê¸°íƒ€">ê¸°íƒ€</option>
          </select>
        </label>
        <label>ë¶„ìœ„ê¸°
          <select id="mood">
            <option value="ì§ˆë¬¸">ì§ˆë¬¸</option>
            <option value="íŒ">íŒ</option>
            <option value="ê¸‰í•¨">ê¸‰í•¨</option>
            <option value="ê²€í† ìš”ì²­">ê²€í† ìš”ì²­</option>
          </select>
        </label>
        <label>ì œëª©
          <input type="text" id="title" placeholder="ì˜ˆ: ì¹´ë“œ ì‚¬ìš©ì•¡ì„ ì–´ë””ì— ë„£ë‚˜ìš”?" />
        </label>
      </div>
      <label>ë‚´ìš©
        <textarea id="body" placeholder="ë‹‰ë„¤ì„ ì—†ì´ë„ ì‘ì„±ë©ë‹ˆë‹¤. ê³„ì‚° ê²°ê³¼ë‚˜ ìƒí™©ì„ ì ì–´ì£¼ì„¸ìš”."></textarea>
      </label>
      <label>ê³„ì‚° ê²°ê³¼/ë©”ëª¨
        <textarea id="calc" placeholder="ì—°ë§ì •ì‚° í™˜ê¸‰ 120ë§Œì› ì˜ˆìƒ Â· ì¹´ë“œ ì¶”ê°€ í•„ìš” 80ë§Œì› ë“±"></textarea>
        <p class="mini">ì‹¤ì‹œê°„ ìš”ì•½ì„ ë³µì‚¬í•´ ë¶™ì—¬ë„£ì–´ë„ ë©ë‹ˆë‹¤.</p>
      </label>
      <div class="actions">
        <button id="submit">ê²Œì‹œí•˜ê¸°</button>
        <button class="ghost" id="reset">ì´ˆê¸°í™”</button>
      </div>
      <div class="hint mini">ğŸ’¡ ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•Šìœ¼ë©°, ë¸Œë¼ìš°ì €ì—ë§Œ ì €ì¥ë©ë‹ˆë‹¤. ì¤‘ìš”í•œ ê°œì¸ì •ë³´ëŠ” ì…ë ¥í•˜ì§€ ë§ˆì„¸ìš”.</div>
    </section>

    <div class="filters">
      <input type="text" id="search" placeholder="ê²€ìƒ‰ì–´ (ì œëª©/ë‚´ìš©/ê³„ì‚° ê²°ê³¼)" />
      <select id="filter-category">
        <option value="all">ì „ì²´</option>
        <option value="ì—°ë§ì •ì‚°">ì—°ë§ì •ì‚°</option>
        <option value="ë²•ì¸ì„¸">ë²•ì¸ì„¸</option>
        <option value="ê¸ˆìœµ/ì¢…í•©ì†Œë“">ê¸ˆìœµ/ì¢…í•©ì†Œë“</option>
        <option value="ê¸°íƒ€">ê¸°íƒ€</option>
      </select>
      <select id="filter-mood">
        <option value="all">ì „ì²´ ë¶„ìœ„ê¸°</option>
        <option value="ì§ˆë¬¸">ì§ˆë¬¸</option>
        <option value="íŒ">íŒ</option>
        <option value="ê¸‰í•¨">ê¸‰í•¨</option>
        <option value="ê²€í† ìš”ì²­">ê²€í† ìš”ì²­</option>
      </select>
      <button class="ghost" id="clear-filters">í•„í„° ì´ˆê¸°í™”</button>
    </div>

    <section id="board-list" class="grid"></section>
  </main>

  <script>
    const STORAGE_KEY = 'tax3-board-v1';
    const id = () => (crypto.randomUUID ? crypto.randomUUID() : String(Date.now() + Math.random()));

    const loadPosts = () => {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        return raw ? JSON.parse(raw) : [];
      } catch (err) {
        console.error(err);
        return [];
      }
    };

    let posts = loadPosts();

    const savePosts = () => {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(posts));
    };

    const renderPosts = () => {
      const list = document.getElementById('board-list');
      if (!list) return;
      const search = document.getElementById('search')?.value?.toLowerCase() || '';
      const filterCategory = document.getElementById('filter-category')?.value || 'all';
      const filterMood = document.getElementById('filter-mood')?.value || 'all';

      const filtered = posts
        .filter((p) => (filterCategory === 'all' ? true : p.category === filterCategory))
        .filter((p) => (filterMood === 'all' ? true : p.mood === filterMood))
        .filter(
          (p) =>
            !search ||
            p.title.toLowerCase().includes(search) ||
            p.body.toLowerCase().includes(search) ||
            p.calc.toLowerCase().includes(search)
        )
        .sort((a, b) => b.createdAt - a.createdAt);

      if (!filtered.length) {
        list.innerHTML = '<div class="card"><p class="muted">ì‘ì„±ëœ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”.</p></div>';
        return;
      }

      list.innerHTML = filtered
        .map(
          (p) => `
        <article class="post">
          <div class="post-head">
            <div>
              <span class="badge category">${p.category}</span>
              <span class="badge mood">${p.mood}</span>
            </div>
            <div class="muted">${new Date(p.createdAt).toLocaleString('ko-KR')}</div>
          </div>
          <h3 style="margin:6px 0;">${p.title || 'ì œëª© ì—†ìŒ'}</h3>
          <div class="post-body">${p.body || 'ë‚´ìš© ì—†ìŒ'}</div>
          ${p.calc ? `<div class="hint"><strong>ê³„ì‚°/ë©”ëª¨</strong><div class="muted">${p.calc}</div></div>` : ''}
          <div class="post-meta">
            <span>ê³µê° ${p.likes || 0}</span>
            <span>ë³µì‚¬ ê°€ëŠ¥</span>
          </div>
          <div class="post-actions">
            <button class="ghost" data-like="${p.id}">ê³µê°</button>
            <button class="ghost" data-copy="${p.id}">ë‚´ìš© ë³µì‚¬</button>
          </div>
        </article>
      `
        )
        .join('');

      list.querySelectorAll('[data-like]').forEach((btn) => {
        btn.addEventListener('click', () => {
          const target = posts.find((p) => p.id === btn.dataset.like);
          if (!target) return;
          target.likes = (target.likes || 0) + 1;
          savePosts();
          renderPosts();
        });
      });

      list.querySelectorAll('[data-copy]').forEach((btn) => {
        btn.addEventListener('click', async () => {
          const target = posts.find((p) => p.id === btn.dataset.copy);
          if (!target) return;
          const text = `${target.title}\n\n${target.body}\n\nê³„ì‚°/ë©”ëª¨: ${target.calc || 'ì—†ìŒ'}`;
          try {
            await navigator.clipboard.writeText(text);
            btn.textContent = 'ë³µì‚¬ë¨';
            setTimeout(() => (btn.textContent = 'ë‚´ìš© ë³µì‚¬'), 1200);
          } catch (err) {
            console.error(err);
          }
        });
      });
    };

    document.getElementById('submit')?.addEventListener('click', () => {
      const category = document.getElementById('category')?.value || 'ì—°ë§ì •ì‚°';
      const mood = document.getElementById('mood')?.value || 'ì§ˆë¬¸';
      const title = document.getElementById('title')?.value.trim() || '';
      const body = document.getElementById('body')?.value.trim() || '';
      const calc = document.getElementById('calc')?.value.trim() || '';
      if (!body) return;

      posts.unshift({
        id: id(),
        category,
        mood,
        title,
        body,
        calc,
        likes: 0,
        createdAt: Date.now(),
      });
      savePosts();
      renderPosts();
      document.getElementById('body').value = '';
      document.getElementById('calc').value = '';
      document.getElementById('title').value = '';
    });

    document.getElementById('reset')?.addEventListener('click', () => {
      ['title', 'body', 'calc'].forEach((id) => {
        const el = document.getElementById(id);
        if (el) el.value = '';
      });
    });

    document.getElementById('clear-filters')?.addEventListener('click', () => {
      const search = document.getElementById('search');
      const cat = document.getElementById('filter-category');
      const mood = document.getElementById('filter-mood');
      if (search) search.value = '';
      if (cat) cat.value = 'all';
      if (mood) mood.value = 'all';
      renderPosts();
    });

    ['search', 'filter-category', 'filter-mood'].forEach((id) => {
      const el = document.getElementById(id);
      if (el) el.addEventListener('input', renderPosts);
      if (el) el.addEventListener('change', renderPosts);
    });

    renderPosts();
  </script>
</body>
</html>
